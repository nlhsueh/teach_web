<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <style type="text/css">
        .center {
            max-width: 600px;
            margin: auto;
            padding: 20px;
            border: 2px solid #00a3af;
            border-radius: 10px;
            background-color: #f8f8f8;
            font-family: Arial, sans-serif;
        }

        h2 {
            text-align: center;
            color: #004c54;
        }

        p.description {
            text-align: center;
            font-size: 14px;
            color: #555;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #333;
        }

        input[type="text"],
        input[type="number"] {
            width: 95%;
            padding: 10px;            
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        input[type="button"] {
            width: 45%;
            padding: 10px;
            margin: 5px;
            background-color: #007b7f;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        input[type="button"]:hover {
            background-color: #005f61;
        }

        .buttons {
            text-align: center;
        }

        p.result {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
        }

        .underweight {
            color: purple;
        }

        .normal {
            color: green;
        }

        .overweight {
            color: red;
        }
    </style>
</head>

<body>
    <div id="app" class="center">
        <h2>èº«é«”è³ªé‡æŒ‡æ•¸ (BMI) è¨ˆç®—å™¨</h2>
        <p class="description">ä¸–ç•Œè¡›ç”Ÿçµ„ç¹”å»ºè­°ä»¥èº«é«”è³ªé‡æŒ‡æ•¸ (Body Mass Index, BMI) ä¾†è¡¡é‡è‚¥èƒ–ç¨‹åº¦ï¼Œå…¶è¨ˆç®—å…¬å¼æ˜¯ä»¥é«”é‡ (å…¬æ–¤) é™¤ä»¥èº«é«˜ (å…¬å°º) çš„å¹³æ–¹ã€‚</p>

        <form @submit.prevent="addPerson">
            <label for="personName">å§“å</label>
            <input type="text" id="personName" v-model="newPerson.name" placeholder="è«‹è¼¸å…¥å§“å" required>

            <label for="height">èº«é«˜ (å…¬åˆ†)</label>
            <input type="number" id="height" v-model="newPerson.height" placeholder="è«‹è¼¸å…¥èº«é«˜" min="145" max="190" required>

            <label for="weight">é«”é‡ (å…¬æ–¤)</label>
            <input type="number" id="weight" v-model="newPerson.weight" placeholder="è«‹è¼¸å…¥é«”é‡" min="45" max="90" required>

            <div class="buttons">
                <input type="button" value="ç«‹å³è¨ˆç®—" @click="addPerson">
                <input type="button" value="å…¨éƒ¨æ¸…é™¤" @click="clearForm">
                <input type="button" value="éš¨æ©Ÿç”Ÿæˆ20çµ„è³‡æ–™" @click="generateRandomData">
                <input type="button" value="æ¸…é™¤æ‰€æœ‰æ¸¬é‡è¨˜éŒ„" @click="clearAllRecords">
                <input type="button" :value="toggleButtonLabel" @click="toggleStatisticsVisibility">
            </div>
        </form>

        <p v-if="addedPersonMessage" :class="bmiCategoryClass" class="result" v-html="addedPersonMessage"></p>

        <!-- çµ±è¨ˆæ•¸æ“šé¡¯ç¤ºå€åŸŸ -->
        <div v-show="showStatistics" id="divStatistics">
            <h3>æ¸¬é‡ç´€éŒ„</h3>
            <p>{{ summary }}</p>

            <hr>

            <h3 style="color:red">éé‡ï¼Œéœ€è¦é‹å‹• â›¹ï¸</h3>
            <ul>
                <li v-for="person in overWeightPersons" :key="person.name">
                    {{ person.name }} : {{ person.height }}cm, {{ person.weight }}kg, BMI: {{ person.bmi }}
                </li>
            </ul>

            <hr>

            <h3 style="color:purple">éè¼•ï¼Œéœ€è¦é€²é£Ÿ ğŸ–</h3>
            <ul>
                <li v-for="person in underWeightPersons" :key="person.name">
                    {{ person.name }} : {{ person.height }}cm, {{ person.weight }}kg, BMI: {{ person.bmi }}
                </li>
            </ul>

            <hr>

            <h3 style="color:green">ğŸ‘ æ­£å¸¸é«”é‡ ğŸ‘</h3>
            <ul>
                <li v-for="person in normalWeightPersons" :key="person.name">
                    {{ person.name }} : {{ person.height }}cm, {{ person.weight }}kg, BMI: {{ person.bmi }}
                </li>
            </ul>
        </div>
    </div>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    persons: [],
                    overWeightPersons: [],
                    underWeightPersons: [],
                    normalWeightPersons: [],
                    newPerson: {
                        name: '',
                        height: '',
                        weight: ''
                    },
                    showStatistics: false,
                    addedPersonMessage: '',
                    showStatisticsVisibility: true,
                    bmiCategoryClass: ''
                }
            },
            computed: {
                summary() {
                    return `éé‡: ${this.overWeightPersons.length}äººï¼›éè¼•: ${this.underWeightPersons.length}äººï¼›æ­£å¸¸: ${this.normalWeightPersons.length}äºº`;
                },
                toggleButtonLabel() {
                    return this.showStatisticsVisibility ? 'éš±è—æ¸¬é‡è¨˜éŒ„' : 'é¡¯ç¤ºæ¸¬é‡è¨˜éŒ„';
                }
            },
            methods: {
                addPerson() {
                    let personName = this.newPerson.name;
                    let height = parseFloat(this.newPerson.height);
                    let weight = parseFloat(this.newPerson.weight);
                    let bodyMassIndex = (weight / ((height / 100) * (height / 100))).toFixed(2);

                    const personData = { name: personName, height: height, weight: weight, bmi: bodyMassIndex };

                    if (bodyMassIndex < 18.5) {
                        this.bmiCategoryClass = 'underweight';
                        this.addedPersonMessage = `<strong>${personName}</strong>: ${height}cm, ${weight}kg, BMI æ˜¯ <strong>${bodyMassIndex}</strong>ï¼Œç‹€æ…‹ï¼šéè¼•`;
                        this.underWeightPersons.push(personData);
                    } else if (bodyMassIndex > 25) {
                        this.bmiCategoryClass = 'overweight';
                        this.addedPersonMessage = `<strong>${personName}</strong>: ${height}cm, ${weight}kg, BMI æ˜¯ <strong>${bodyMassIndex}</strong>ï¼Œç‹€æ…‹ï¼šéé‡`;
                        this.overWeightPersons.push(personData);
                    } else {
                        this.bmiCategoryClass = 'normal';
                        this.addedPersonMessage = `<strong>${personName}</strong>: ${height}cm, ${weight}kg, BMI æ˜¯ <strong>${bodyMassIndex}</strong>ï¼Œç‹€æ…‹ï¼šæ­£å¸¸`;
                        this.normalWeightPersons.push(personData);
                    }

                    this.persons.push(personData);

                    this.newPerson.name = '';
                    this.newPerson.height = '';
                    this.newPerson.weight = '';

                    this.showStatistics = true; // é¡¯ç¤ºæ¸¬é‡ç´€éŒ„
                },
                clearForm() {
                    this.newPerson.name = '';
                    this.newPerson.height = '';
                    this.newPerson.weight = '';
                    this.addedPersonMessage = '';
                    this.bmiCategoryClass = '';
                },
                toggleStatisticsVisibility() {
                    this.showStatisticsVisibility = !this.showStatisticsVisibility;
                    this.showStatistics = this.showStatisticsVisibility;
                },
                generateRandomData() {
                    for (let i = 0; i < 20; i++) {
                        let personName = `P${Math.floor(Math.random() * 20) + 1}`;
                        let height = Math.floor(Math.random() * (190 - 145 + 1)) + 145;
                        let weight = Math.floor(Math.random() * (90 - 45 + 1)) + 45;
                        let bodyMassIndex = (weight / ((height / 100) * (height / 100))).toFixed(2);

                        const personData = { name: personName, height: height, weight: weight, bmi: bodyMassIndex };

                        if (bodyMassIndex < 18.5) {
                            this.underWeightPersons.push(personData);
                        } else if (bodyMassIndex > 25) {
                            this.overWeightPersons.push(personData);
                        } else {
                            this.normalWeightPersons.push(personData);
                        }

                        this.persons.push(personData);
                    }
                    this.showStatistics = true; // é¡¯ç¤ºæ¸¬é‡ç´€éŒ„
                },
                clearAllRecords() {
                    this.persons = [];
                    this.overWeightPersons = [];
                    this.underWeightPersons = [];
                    this.normalWeightPersons = [];
                    this.addedPersonMessage = '';
                    this.showStatistics = false;
                }
            }
        })
        app.mount('#app')
    </script>
</body>

</html>
